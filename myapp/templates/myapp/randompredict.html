<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Threat Prediction | RansomShield</title>
  {% load static %}
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'myapp/style.css' %}?v=5">
</head>

<body>
  <nav class="navbar">
    <a href="/homepage" class="navbar-brand" style="text-decoration: none;"><span>//</span> RansomShield</a>
    <div class="nav-box-container">
      <a href="/homepage" class="nav-box">Dashboard</a>
      <a href="/dataupload" class="nav-box">Upload</a>
      <a href="/modelcreation" class="nav-box">Train</a>
      <a href="/randompredict" class="nav-box active">Predict</a>
      <a href="/rfamilypredict" class="nav-box">Family</a>
      <a href="/viewgraph" class="nav-box">Metrics</a>
    </div>
  </nav>

  <div class="container">
    <h1>Binary Threat Detection</h1>

    <div class="card">
      <form action="{% url 'randompredict' %}" method="POST" enctype="multipart/form-data"
        style="max-width: 600px; margin: 0 auto;">
        {% csrf_token %}
        <div style="text-align: center; margin-bottom: 2rem;">
          <h3>Upload Analysis Target</h3>
          <p style="color: var(--text-muted);">Select a dataset or file signature to analyze for ransomware traits.</p>
        </div>

        <div
          style="border: 2px dashed rgba(255,255,255,0.1); padding: 2rem; border-radius: 10px; text-align: center; margin-bottom: 2rem;">
          <input type="file" id="myFile" name="myFile" style="display: none;"
            onchange="document.getElementById('file-label').innerText = this.files[0].name">
          <label for="myFile" id="file-label" style="cursor: pointer; color: var(--primary); font-weight: bold;">
            + Click to Select File
          </label>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%;">Run Analysis</button>
      </form>

      {% if data %}
      <div style="margin-top: 3rem;">
        <h3>Analysis Results</h3>
        <div style="overflow-x: auto;">
          <table>
            <thead>
              <tr>
                {% for key in data.0.keys %}
                <th>{{ key }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for row in data %}
              <tr>
                {% for value in row.values %}
                <td>{{ value }}</td>
                {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</body>

</html>